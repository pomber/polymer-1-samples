<link rel="import" href="../bower_components/polymer/polymer.html">

<dom-module id="markov-generator">
  <template>
    <style>
      :host {
        display: block;
      }
    </style>

<div>[[count]]</div>

</template>
<script>
    Polymer({
      is: 'markov-generator',

      properties: {
        seed: String,
        order: Number
      },

      observers: [
        'train(seed)'
      ],

      toArray: function (obj) {
        var array = Object.keys(obj).map(function (key) {
          return {
            name: key,
            value: obj[key]
          };
        });

        return array;
      },

      train: function (seed) {
        console.log('train');
        this.count = seed.length;
        const freqs = {};

        for (var i = 0; i < seed.length; i++) {
          var sentence = seed[i];
          var words = sentence.split(' ');
          for (var j = 0; j < words.length; j++) {
            const word = words[j].toLowerCase();
            freqs[word] = freqs[word] || 0;
            freqs[word]++;
          }
        }

        this.freqs = freqs;
        console.table(this.toArray(freqs));
      }
    });
  </script>
</dom-module>